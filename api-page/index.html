<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manzxy API</title>
<link rel="icon" href="/assets/icon.png">

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: {
        minecraft: ['Press Start 2P', 'monospace']
      }
    }
  }
}
</script>

<style>
::-webkit-scrollbar{display:none}

/* ===== BODY BACKGROUND ===== */
.bg-dark{
  background:repeating-linear-gradient(
    45deg,#1b1b1b,#1b1b1b 14px,#161616 14px,#161616 28px);
  color:#e5e7eb;
}
.bg-light{
  background:#f2f2f2;
  color:#111;
}

/* ===== PANEL ===== */
.mc-panel{
  background:#2a2a2a;
  border:4px solid #3f3f3f;
  box-shadow:inset -4px -4px 0 #1a1a1a,
             inset 4px 4px 0 #4a4a4a;
}
.bg-light .mc-panel{
  background:#eee;
  border-color:#ccc;
}

/* ===== BUTTON ===== */
.mc-btn{
  background:#3a7d3a;
  border:3px solid #2b5d2b;
  box-shadow:inset -3px -3px 0 #1f3f1f,
             inset 3px 3px 0 #5fa75f;
  font-size:10px;
  padding:6px 8px;
}

/* ===== INPUT ===== */
.mc-input{
  background:#1e1e1e;
  border:3px solid #3f3f3f;
}
.bg-light .mc-input{
  background:#fff;
  border-color:#ccc;
}

/* ===== GET BADGE ===== */
.method-get{
  background:#2563eb;
  color:#fff;
  border:2px solid #1e40af;
  padding:2px 6px;
  font-size:10px;
  margin-right:6px;
}

/* ===== IMAGE BACKGROUND AREA ===== */
.footer-bg{
  background-image:url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee");
  background-size:cover;
  background-position:center;
}
</style>
</head>

<body class="font-minecraft bg-dark min-h-screen flex flex-col">

<!-- MAIN -->
<main class="max-w-3xl mx-auto px-6 py-10 mc-panel w-full">

<!-- HEADER -->
<div class="flex items-center justify-between mb-6">
  <div class="flex items-center gap-3">
    <img src="/assets/icon.png" class="w-8">
    <span class="text-green-400">MANZXY API</span>
  </div>

  <div class="flex gap-2">
    <button onclick="setTheme('dark')" class="mc-btn">DARK</button>
    <button onclick="setTheme('light')" class="mc-btn">LIGHT</button>
  </div>
</div>

<!-- INFORMASI -->
<div class="mb-6">
  <div class="flex items-center gap-2 mb-2">
    <span class="material-icons">notifications</span>
    <span class="text-xs">INFORMASI</span>
  </div>
  <div id="notifications-list" class="space-y-2">
    <div class="text-xs mc-panel p-3">Loading...</div>
  </div>
</div>

<!-- SEARCH -->
<input id="searchInput" placeholder="Search API..."
class="w-full px-4 py-3 mc-input text-xs mb-6">

<!-- API LIST -->
<div id="apiList" class="space-y-3"></div>

<!-- TQTO (DI ATAS FOOTER) -->
<div class="mt-10 text-center text-[10px] opacity-70">
  TQTO: Manzxy ‚Ä¢ Contributors ‚Ä¢ Open Source Community
</div>

<!-- FOOTER -->
<footer class="mt-4 text-center text-[10px]">
  ¬© 2025 Manzxy
</footer>

</main>

<!-- BACKGROUND GAMBAR (BAWAH FOOTER) -->
<div class="footer-bg h-40 w-full mt-4"></div>

<script>
function setTheme(mode){
 document.body.classList.remove('bg-dark','bg-light')
 document.body.classList.add(mode==='dark'?'bg-dark':'bg-light')
 localStorage.setItem('theme',mode)
}
setTheme(localStorage.getItem('theme')||'dark')

function toggleCategory(i){
 document.getElementById('cat-'+i).classList.toggle('hidden')
}

async function loadApis(){
 const res=await fetch('/assets/settings.json')
 const data=await res.json()
 let html=''
 data.categories.forEach((cat,i)=>{
  html+=`
  <div class="mc-panel">
    <button onclick="toggleCategory(${i})"
     class="w-full px-4 py-3 text-left text-xs">
     üìÅ ${cat.name} (${cat.items.length})
    </button>
    <div id="cat-${i}" class="hidden">`
  cat.items.forEach(it=>{
    html+=`
    <div class="border-t border-gray-600 px-4 py-3 text-xs flex items-center">
      <span class="method-get">GET</span>
      <span>${it.path}</span>
    </div>`
  })
  html+='</div></div>'
 })
 apiList.innerHTML=html
}

async function loadNotifications(){
 const res=await fetch('/notifications.json')
 const data=await res.json()
 const box=document.getElementById('notifications-list')
 box.innerHTML=''
 data.forEach(n=>{
  box.innerHTML+=`
   <div class="mc-panel p-3 text-xs">
    <b>${n.title}</b><br>${n.message}
   </div>`
 })
}

searchInput.oninput=function(){
 const q=this.value.toLowerCase()
 document.querySelectorAll('#apiList span:last-child').forEach(e=>{
  e.parentElement.style.display=
   e.textContent.toLowerCase().includes(q)?'':'none'
 })
}

document.addEventListener('DOMContentLoaded',()=>{
 loadApis()
 loadNotifications()
})
</script>

</body>
</html>
