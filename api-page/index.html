<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1f1f1f">
<title>Manzxy API</title>
<link rel="icon" href="/assets/icon.png">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Ubuntu+Mono&display=swap" rel="stylesheet">

<script>
tailwind.config = {
  darkMode: 'class',
  theme: {
    extend: {
      fontFamily: {
        mc: ['Press Start 2P', 'monospace'],
        mono: ['Ubuntu Mono', 'monospace']
      }
    }
  }
}
</script>

<style>
::-webkit-scrollbar{display:none}

/* ================= THEME ================= */
body{
  background:repeating-linear-gradient(
    45deg,#1f1f1f,#1f1f1f 16px,#191919 16px,#191919 32px);
  color:#d1d5db;
}

/* ================= PANEL ================= */
.mc-panel{
  background:#2b2b2b;
  border:3px solid #3f3f3f;
  box-shadow:
    inset -3px -3px 0 #1a1a1a,
    inset 3px 3px 0 #4a4a4a;
}

/* ================= BUTTON ================= */
.mc-btn{
  background:#3a7d3a;
  border:2px solid #2b5d2b;
  box-shadow:
    inset -2px -2px 0 #1f3f1f,
    inset 2px 2px 0 #5fa75f;
  font-size:10px;
  padding:6px 10px;
  cursor:pointer;
}

/* ================= INPUT ================= */
.mc-input{
  background:#1e1e1e;
  border:2px solid #3f3f3f;
}

/* ================= GET BADGE ================= */
.method-get{
  background:#2563eb;
  color:#fff;
  border:2px solid #1e40af;
  padding:2px 6px;
  font-size:10px;
  margin-right:6px;
}

/* ================= RESPONSE ================= */
.response-box{
  background:#000;
  color:#22c55e;
  border:2px solid #1f2937;
}

/* ================= FOOTER BG ================= */
.footer-bg{
  background:url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee");
  background-size:cover;
  background-position:center;
}
</style>
</head>

<body class="font-mono min-h-screen">

<!-- ================= MAIN ================= -->
<main class="max-w-2xl mx-auto px-6 py-10 mc-panel">

<!-- HEADER -->
<div class="flex items-center justify-between mb-6">
  <div class="flex items-center gap-3">
    <img src="/assets/icon.png" class="w-8">
    <span class="font-mc text-green-400 text-xs">MANZXY API</span>
  </div>
  <div class="flex gap-2">
    <button id="btnDark" class="mc-btn">DARK</button>
    <button id="btnLight" class="mc-btn">LIGHT</button>
  </div>
</div>

<!-- INFORMASI -->
<div class="mb-6">
  <div class="flex items-center gap-2 text-xs mb-2">
    <span class="material-icons">notifications</span>
    INFORMASI
  </div>
  <div id="notifications-list" class="space-y-2 text-xs opacity-80">
    Loading...
  </div>
</div>

<!-- SEARCH -->
<input id="searchInput" placeholder="Search API..."
class="w-full px-4 py-3 mc-input text-xs mb-6">

<!-- API LIST -->
<div id="apiList" class="space-y-3"></div>

<footer class="mt-10 text-center text-xs opacity-70">
¬© 2025 Manzxy
</footer>

</main>

<!-- ================= CONTRIBUTORS ================= -->
<section class="footer-bg mt-6 py-10">
  <div class="max-w-2xl mx-auto text-white">
    <div class="text-center text-xs mb-6 opacity-80">CONTRIBUTORS</div>

    <div class="space-y-4">
      <div class="mc-panel flex items-center gap-4 p-4">
        <img src="https://i.pravatar.cc/80?img=12" class="w-14 h-14 rounded">
        <div class="flex-1">
          <div class="text-xs">Hazel</div>
          <div class="text-[10px] opacity-70">Developer</div>
        </div>
        <div class="flex gap-3">
          <i class="fab fa-telegram"></i>
          <i class="fab fa-github"></i>
        </div>
      </div>

      <div class="mc-panel flex items-center gap-4 p-4">
        <img src="https://i.pravatar.cc/80?img=32" class="w-14 h-14 rounded">
        <div class="flex-1">
          <div class="text-xs">NekoLabs</div>
          <div class="text-[10px] opacity-70">UI & UX Inspiration</div>
        </div>
        <i class="fas fa-globe"></i>
      </div>

      <div class="mc-panel flex items-center gap-4 p-4">
        <img src="https://i.pravatar.cc/80?img=45" class="w-14 h-14 rounded">
        <div class="flex-1">
          <div class="text-xs">Azam</div>
          <div class="text-[10px] opacity-70">Scrape Team</div>
        </div>
        <i class="fab fa-whatsapp"></i>
      </div>
    </div>
  </div>
</section>

<!-- ================= SCRIPT ================= -->
<script>
/* ========== THEME ========== */
const body=document.body
btnDark.onclick=()=>{body.classList.remove('light');localStorage.theme='dark'}
btnLight.onclick=()=>{body.classList.add('light');localStorage.theme='light'}
if(localStorage.theme==='light')body.classList.add('light')

/* ========== TOGGLE ========== */
function toggleCategory(i){
 document.getElementById('cat-'+i).classList.toggle('hidden')
}
function toggleEndpoint(c,e){
 document.getElementById(`ep-${c}-${e}`).classList.toggle('hidden')
}

/* ========== LOAD APIS (settings.json) ========== */
async function loadApis(){
 const box=document.getElementById('apiList')
 box.innerHTML='Loading APIs...'
 try{
  const res=await fetch('/assets/settings.json')
  const data=await res.json()
  let html=''
  data.categories.forEach((cat,ci)=>{
    html+=`
    <div class="mc-panel">
      <button onclick="toggleCategory(${ci})"
       class="w-full px-4 py-3 text-left text-xs">
       üìÅ ${cat.name} (${cat.items.length})
      </button>
      <div id="cat-${ci}" class="hidden">`
    cat.items.forEach((it,ei)=>{
      html+=`
      <div class="border-t border-gray-600">
        <button onclick="toggleEndpoint(${ci},${ei})"
         class="w-full px-4 py-3 text-left text-xs flex items-center">
          <span class="method-get">GET</span>
          <span>${it.path}</span>
        </button>

        <div id="ep-${ci}-${ei}" class="hidden px-4 py-3 text-xs space-y-3">
          <div class="opacity-80">${it.desc||''}</div>

          <form onsubmit="execReq(event,'${it.path}')">
            ${(it.params?Object.keys(it.params).map(p=>`
              <input name="${p}" placeholder="${it.params[p]}"
               class="mc-input w-full px-3 py-2 text-xs mb-2">`).join(''):'')}
            <button class="mc-btn">Execute</button>
          </form>

          <pre class="response-box p-3 text-xs overflow-auto hidden"></pre>
        </div>
      </div>`
    })
    html+='</div></div>'
  })
  box.innerHTML=html
 }catch(e){
  box.innerHTML='<div class="text-red-400 text-xs">Failed load settings.json</div>'
 }
}

/* ========== EXECUTE ========== */
async function execReq(e,path){
 e.preventDefault()
 const form=e.target
 const out=form.nextElementSibling
 out.classList.remove('hidden')
 out.textContent='Loading...'
 const q=new URLSearchParams(new FormData(form)).toString()
 const res=await fetch(q?`${path}?${q}`:path)
 const ct=res.headers.get('content-type')
 if(ct&&ct.includes('json')){
  out.textContent=JSON.stringify(await res.json(),null,2)
 }else if(ct&&ct.startsWith('image/')){
  const blob=await res.blob()
  out.innerHTML=`<img src="${URL.createObjectURL(blob)}">`
 }else{
  out.textContent=await res.text()
 }
}

/* ========== NOTIFICATIONS ========== */
async function loadNotifications(){
 try{
  const res=await fetch('/notifications.json')
  const data=await res.json()
  notifications-list.innerHTML=data.map(n=>`
    <div class="mc-panel p-3">${n.title}</div>
  `).join('')
 }catch{
  notifications-list.textContent='No notifications'
 }
}

/* ========== SEARCH ========== */
searchInput.oninput=function(){
 const q=this.value.toLowerCase()
 document.querySelectorAll('#apiList .mc-panel').forEach(c=>{
  c.style.display=c.textContent.toLowerCase().includes(q)?'':'none'
 })
}

document.addEventListener('DOMContentLoaded',()=>{
 loadApis()
 loadNotifications()
})
</script>

</body>
  </html>
